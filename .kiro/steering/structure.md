# プロジェクト構造

## ルートディレクトリレイアウト

```
kazoo/                          # メインプロジェクトディレクトリ
├── src/kazoo/                  # コアソースコード（インストール可能パッケージ）
├── training/                   # コンポーネント別訓練モジュール
│   ├── gat/                   # グラフアテンションネットワーク訓練
│   ├── irl/                   # 逆強化学習
│   └── rl/                    # 強化学習（PPO）
├── analysis/                   # 分析・レポート
│   ├── reports/               # 分析レポート生成器
│   └── visualization/         # 可視化スクリプト
├── evaluation/                 # モデル評価・テスト
├── data_processing/           # データ前処理・生成
├── pipelines/                 # エンドツーエンド訓練パイプライン
├── scripts/                   # 実行可能スクリプト・ユーティリティ
├── utils/                     # 共有ユーティリティ・ヘルパー
├── configs/                   # 設定ファイル（YAML）
├── data/                      # データファイル・データセット
├── models/                    # 保存済みモデル・チェックポイント
├── logs/                      # 訓練ログ・出力
└── outputs/                   # 生成された出力・結果
```

## 主要ディレクトリ

### コア実装 (`src/kazoo/`)

- コアアルゴリズムを含むインストール可能 Python パッケージ
- エージェント、環境、特徴量、GNN モデル、学習器、ユーティリティを含む
- `__init__.py` ファイルを含む標準 Python パッケージ構造に従う

### 訓練コンポーネント (`training/`)

- **`gat/`**: グラフアテンションネットワーク訓練スクリプト
- **`irl/`**: 逆強化学習実装
- **`rl/`**: PPO 強化学習訓練
- 各コンポーネントは明確なインターフェースを持つ自己完結型であること

### 分析・レポート (`analysis/`)

- **`reports/`**: 自動分析レポート生成
  - 個別コンポーネント分析（IRL、GAT、コラボレーション）
  - 包括的サマリーレポート
  - 重み分析と特徴量重要度
- **`visualization/`**: プロット・可視化ユーティリティ
- すべての分析出力は再現可能で十分に文書化されていること

### データパイプライン (`data_processing/`)

- GitHub アーカイブからのデータ抽出
- グラフ生成・ネットワーク構築
- プロファイル・ラベル生成
- エキスパート軌跡作成
- ETL（抽出、変換、読み込み）パターンに従う

### 設定管理 (`configs/`)

- YAML ベース設定ファイル
- 環境固有設定（訓練、テスト、本番）
- 開発者プロファイル設定
- ベースとオーバーライドパターンによる階層設定を使用

### モデル成果物 (`models/`, `data/`)

- **`models/`**: 訓練済みモデルチェックポイント・保存状態
- **`data/`**: 処理済みデータセット、グラフ、軌跡
- タイムスタンプ付きの一貫した命名規則を使用
- モデルバージョニング・メタデータを維持

## ファイル命名規則

### スクリプト・モジュール

- Python ファイルには snake_case を使用: `train_gat.py`, `evaluate_models.py`
- コンポーネントタイプでプレフィックス: `gat_analysis.py`, `irl_weights_analysis.py`
- 機能を示す説明的な名前を使用

### 設定ファイル

- 環境固有: `base_training.yaml`, `base_test_2022.yaml`
- コンポーネント固有: `dev_profiles_training.yaml`
- 異なる環境に対して一貫したサフィックスを使用

### データファイル

- データタイプと目的を含める: `backlog_training.json`, `expert_trajectories.pkl`
- 生成ファイルにはタイムスタンプを使用: `model_20250714_102645.zip`
- 訓練/テスト/検証データセットを分離して維持

## コード組織化原則

### 関心の分離

- 訓練ロジックを ML コンポーネント別に分離（GAT、IRL、RL）
- 分析・評価を専用モジュールに配置
- データ処理を訓練コードから分離

### 再利用性

- 共通ユーティリティを `utils/` ディレクトリに配置
- 共有設定管理
- 組み合わせ可能なモジュラーパイプラインコンポーネント

### 再現性

- すべての実験を YAML ファイルで設定可能
- 一貫したログ・出力形式
- モデル・データセットのバージョン管理

## インポートパターン

```python
# コアパッケージインポート
from kazoo.agents import MultiAgentSystem
from kazoo.envs import OSSEnvironment
from kazoo.features import FeatureExtractor

# コンポーネント固有インポート
from training.gat import GATTrainer
from training.irl import IRLLearner
from analysis.reports import SummaryReport
```

## 開発ワークフロー

1. **データ処理**: `data_processing/` でデータセットを生成/更新
2. **訓練**: 個別コンポーネントまたはフルパイプラインを実行
3. **分析**: レポート・可視化を生成
4. **評価**: モデル性能をテスト
5. **反復**: 設定を更新し必要に応じて再訓練

新機能やコンポーネントを追加する際は、一貫性と明確性を保つためにこの構造に従ってください。
