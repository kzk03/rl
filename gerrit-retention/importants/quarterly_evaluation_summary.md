# 四半期ごとIRL評価結果（2022年）

## 概要

2022年4月〜2023年1月の1年間にわたり、3ヶ月ごとに4つのスナップショットで評価を実施しました。
各スナップショットで固定対象者アプローチを使用し、6ヶ月学習と12ヶ月学習の性能を比較しました。

## 評価設定

- **評価期間**: 2022年4月〜2023年1月（1年間）
- **スナップショット間隔**: 3ヶ月（四半期ごと）
- **スナップショット日**: 2022-04-01, 2022-07-01, 2022-10-01, 2023-01-01
- **学習期間**: 6ヶ月 vs 12ヶ月
- **予測期間**: 3ヶ月（次の四半期）
- **固定対象者**: 各スナップショットで基準期間6ヶ月の活動レビュアーを固定
- **シーケンス長**: 15
- **エポック数**: 30

## 四半期ごとの結果

### 2022 Q2 (2022-04-01スナップショット)

**対象レビュアー数: 343人**

| 学習期間 | AUC-ROC | AUC-PR  | F1    | Precision | Recall | Accuracy |
|---------|---------|---------|-------|-----------|--------|----------|
| 6ヶ月   | 0.8813  | 0.9106  | 0.821 | 1.000     | 0.697  | 0.855    |
| 12ヶ月  | 0.8712  | 0.9070  | 0.793 | 0.920     | 0.697  | 0.826    |

**特徴**:
- 対象レビュアー数が最多（343人）
- 6ヶ月学習がprecision 1.0を達成
- 継続率: 訓練46.0%, テスト47.8%

### 2022 Q3 (2022-07-01スナップショット)

**対象レビュアー数: 320人**

| 学習期間 | AUC-ROC | AUC-PR  | F1    | Precision | Recall | Accuracy |
|---------|---------|---------|-------|-----------|--------|----------|
| 6ヶ月   | 0.8601  | 0.8428  | 0.745 | 0.826     | 0.679  | 0.797    |
| 12ヶ月  | 0.8204  | 0.8393  | 0.694 | 0.810     | 0.607  | 0.766    |

**特徴**:
- AUC-PRが他の四半期より低い
- 6ヶ月学習が12ヶ月学習より優位
- 継続率: 訓練50.0%, テスト43.8%

### 2022 Q4 (2022-10-01スナップショット)

**対象レビュアー数: 306人**

| 学習期間 | AUC-ROC | AUC-PR  | F1    | Precision | Recall | Accuracy |
|---------|---------|---------|-------|-----------|--------|----------|
| 6ヶ月   | 0.9136  | 0.8547  | 0.732 | 0.833     | 0.652  | 0.823    |
| 12ヶ月  | 0.8902  | 0.8626  | 0.711 | 0.727     | 0.696  | 0.790    |

**特徴**:
- AUC-ROCが最高（0.9136）
- 継続率が最低: 訓練49.2%, テスト37.1%
- 予測が難しい時期だが精度は高い

### 2023 Q1 (2023-01-01スナップショット)

**対象レビュアー数: 291人**

| 学習期間 | AUC-ROC | AUC-PR  | F1    | Precision | Recall | Accuracy |
|---------|---------|---------|-------|-----------|--------|----------|
| 6ヶ月   | 0.7880  | 0.7393  | 0.761 | 0.675     | 0.871  | 0.712    |
| 12ヶ月  | 0.8664  | 0.8938  | 0.813 | 0.788     | 0.839  | 0.797    |

**特徴**:
- 対象レビュアー数が最少（291人）
- **12ヶ月学習が明確に優位**（AUC-ROC +0.078）
- 継続率: 訓練56.9%, テスト52.5%

## 時系列分析

### 対象レビュアー数の推移

```
2022 Q2: 343人 → 2022 Q3: 320人 → 2022 Q4: 306人 → 2023 Q1: 291人
```

**減少傾向**: 1年間で343人から291人へ（-15.2%）
→ OpenStackコミュニティの活動レベルが徐々に低下している可能性

### 6ヶ月学習 vs 12ヶ月学習の比較

#### AUC-ROC推移

| 四半期  | 6ヶ月学習 | 12ヶ月学習 | 差分    | 優位   |
|--------|----------|-----------|---------|--------|
| 2022Q2 | 0.8813   | 0.8712    | +0.0101 | 6ヶ月  |
| 2022Q3 | 0.8601   | 0.8204    | +0.0397 | 6ヶ月  |
| 2022Q4 | 0.9136   | 0.8902    | +0.0234 | 6ヶ月  |
| 2023Q1 | 0.7880   | 0.8664    | -0.0784 | 12ヶ月 |

**観察**:
- Q2〜Q4: 6ヶ月学習が優位（平均+0.024）
- Q1: 12ヶ月学習が大きく逆転（+0.078）
- **仮説**: コミュニティ活動が低下する時期は、長期履歴が重要

#### AUC-PR推移

| 四半期  | 6ヶ月学習 | 12ヶ月学習 | 差分    | 優位   |
|--------|----------|-----------|---------|--------|
| 2022Q2 | 0.9106   | 0.9070    | +0.0036 | 6ヶ月  |
| 2022Q3 | 0.8428   | 0.8393    | +0.0035 | 6ヶ月  |
| 2022Q4 | 0.8547   | 0.8626    | -0.0079 | 12ヶ月 |
| 2023Q1 | 0.7393   | 0.8938    | -0.1545 | 12ヶ月 |

**観察**:
- Q1での12ヶ月学習の優位性が非常に顕著（+0.155）
- 不均衡データ（継続率低下時）では長期履歴が有効

### 継続率の推移

#### 訓練セット

| 四半期  | 継続率 | 傾向 |
|--------|--------|------|
| 2022Q2 | 46.0%  | -    |
| 2022Q3 | 50.0%  | ↑    |
| 2022Q4 | 49.2%  | →    |
| 2023Q1 | 56.9%  | ↑    |

#### テストセット

| 四半期  | 継続率 | 傾向 |
|--------|--------|------|
| 2022Q2 | 47.8%  | -    |
| 2022Q3 | 43.8%  | ↓    |
| 2022Q4 | 37.1%  | ↓    |
| 2023Q1 | 52.5%  | ↑    |

**観察**:
- Q4でテスト継続率が最低（37.1%）だが、予測精度は高い
- Q1で継続率が回復し、12ヶ月学習が最も有効

## 重要な発見

### 1. 学習期間の効果は時期に依存する

- **活動的な時期（Q2-Q4）**: 6ヶ月学習で十分
- **活動低下時期（Q1）**: 12ヶ月学習が必須

### 2. 固定対象者アプローチの有効性

各四半期で異なるレビュアーセットが固定され、公平な比較が可能：
- 2022Q2: 343人
- 2022Q3: 320人
- 2022Q4: 306人
- 2023Q1: 291人

### 3. コミュニティ活動の季節性

- Q2-Q3: 活動的な時期（対象レビュアー多い、継続率安定）
- Q4: 予測困難な時期（継続率低下）
- Q1: 回復期（継続率上昇、長期履歴重要）

### 4. 予測精度の変動

**最高精度**: 2022Q4 (AUC-ROC 0.9136) - 6ヶ月学習
**最低精度**: 2023Q1 (AUC-ROC 0.7880) - 6ヶ月学習

→ 時期によって最適な学習期間が異なる

## 実用的な推奨事項

### 1. 適応的学習期間選択

```python
if community_activity_level == "high":
    learning_period = 6  # months
elif community_activity_level == "low":
    learning_period = 12  # months
else:
    learning_period = 9  # months (中間値)
```

### 2. 季節性を考慮した予測

- 年末年始（Q4-Q1）: 長期学習期間を推奨
- その他の時期: 短期学習期間でも十分

### 3. アンサンブルアプローチ

6ヶ月と12ヶ月モデルの予測を組み合わせることで、時期に関わらず安定した性能を実現できる可能性がある。

## ファイル構成

```
importants/
├── irl_quarterly_2022q2/
│   ├── sliding_window_results_fixed_pop_seq.csv
│   ├── evaluation_matrix_fixed_pop_seq.txt
│   ├── evaluation_metadata.json
│   └── models/
│       ├── irl_h6m_t3m_fixed_seq.pth
│       └── irl_h12m_t3m_fixed_seq.pth
├── irl_quarterly_2022q3/
│   └── (同様の構成)
├── irl_quarterly_2022q4/
│   └── (同様の構成)
├── irl_quarterly_2023q1/
│   └── (同様の構成)
└── quarterly_evaluation_summary.md  # 本ドキュメント
```

## 次のステップ

### 分析の深化

1. **月次評価**: さらに細かい時間粒度での評価
2. **プロジェクト別季節性**: OpenStack各プロジェクトの活動パターン分析
3. **外部要因分析**: リリースサイクル、イベント（会議等）との相関

### モデル改善

1. **時期適応型モデル**: コミュニティ活動レベルに応じた学習期間の自動選択
2. **アンサンブルモデル**: 6ヶ月と12ヶ月モデルの組み合わせ
3. **季節性の明示的モデリング**: 時期特徴量の追加

### 実装

1. **リアルタイム予測システム**: 現在のコミュニティ状態に基づく最適モデル選択
2. **ダッシュボード**: 四半期ごとの予測結果の可視化
3. **アラートシステム**: 継続率低下の早期検知

---

作成日: 2025-10-17
評価期間: 2022-04-01 〜 2023-01-01
スナップショット数: 4
総モデル数: 8（各スナップショット×2学習期間）
