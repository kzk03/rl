# 受諾率基準の影響分析

## 📊 概要

レビュー承諾予測モデルにおける、異なる受諾率基準がモデル性能に与える影響を分析。

## 🔍 問題設定

### 現在のラベル付け

- **正例**: 評価期間内に少なくとも 1 つのレビュー依頼を承諾
- **負例**: 評価期間内にレビュー依頼を受けたが全て拒否、または依頼なし

### 提案される代替基準

受諾率（承諾数 / 依頼数）に基づく基準:

1. **10%基準**: 受諾率 10%以上を正例
2. **25%基準**: 受諾率 25%以上を正例

## 📈 分析結果

### 1. 各基準での正例数

| 期間     | 現在の正例        | 10%基準           | 25%基準           |
| -------- | ----------------- | ----------------- | ----------------- |
| 0-3m     | 21 件 (35.0%)     | 18 件 (30.0%)     | 9 件 (15.0%)      |
| 3-6m     | 18 件 (32.7%)     | 13 件 (23.6%)     | 6 件 (10.9%)      |
| 6-9m     | 13 件 (31.0%)     | 12 件 (28.6%)     | 3 件 (7.1%)       |
| 9-12m    | 16 件 (41.0%)     | 14 件 (35.9%)     | 4 件 (10.3%)      |
| **合計** | **68 件 (34.7%)** | **57 件 (29.1%)** | **22 件 (11.2%)** |

### 2. 現在の正例の受諾率分布

| 期間  | 最小  | 25%タイル | 中央値 | 75%タイル | 最大  |
| ----- | ----- | --------- | ------ | --------- | ----- |
| 0-3m  | 0.006 | 0.140     | 0.231  | 0.333     | 1.000 |
| 3-6m  | 0.010 | 0.089     | 0.174  | 0.315     | 1.000 |
| 6-9m  | 0.062 | 0.143     | 0.184  | 0.235     | 0.333 |
| 9-12m | 0.053 | 0.153     | 0.194  | 0.237     | 1.000 |

**発見**: 中央値が 0.18 ～ 0.23、25%タイルが 0.14 程度

### 3. 閾値別の正例数

| 閾値 | 正例数 | 正例率   |
| ---- | ------ | -------- |
| ≥5%  | 61 件  | 31.1%    |
| ≥10% | 54 件  | 27.6% ⭐ |
| ≥15% | 47 件  | 24.0%    |
| ≥20% | 35 件  | 17.9%    |
| ≥25% | 22 件  | 11.2% ⚠️ |
| ≥30% | 15 件  | 7.7%     |

## ⚠️ 25%基準の問題点

### 1. データ量不足

- **各期間の正例数**: 3 ～ 9 件
- **総正例数**: 22 件（全サンプルの 11.2%）
- **警告**: 正例が 10 件未満の期間が複数あり、学習困難

### 2. クラス不均衡

- **正例率**: 11.2%（理想は 20-40%）
- **負例率**: 88.8%
- **影響**: モデルが負例に偏って学習する可能性

### 3. 学習データの質

- **サンプルサイズ**: 各期間で正例が少なすぎる
- **統計的信頼性**: 評価が不安定
- **汎化性能**: 過学習のリスク

## ✅ 10%基準の利点

### 1. データ量確保

- **各期間の正例数**: 12 ～ 18 件
- **総正例数**: 57 件（全サンプルの 29.1%）
- **十分なデータ**: 学習に必要な量を確保

### 2. バランス良好

- **正例率**: 29.1%（理想的な範囲）
- **負例率**: 70.9%
- **影響**: クラス不均衡の問題が軽減

### 3. 現実的な閾値

- **25%タイル**: 0.14
- **中央値**: 0.18 ～ 0.23
- **10%基準**: 現実的な範囲内

## 📊 開発者 3 分類

### 分類基準

1. **積極的**: 受諾率 25%以上
2. **中程度**: 受諾率 10%以上 25%未満
3. **消極的**: 受諾率 10%未満

### 各期間での内訳

| 期間     | 積極的             | 中程度             | 消極的              | 依頼なし           |
| -------- | ------------------ | ------------------ | ------------------- | ------------------ |
| 0-3m     | 9 件 (15.0%)       | 8 件 (13.3%)       | 27 件 (45.0%)       | 16 件 (26.7%)      |
| 3-6m     | 6 件 (10.9%)       | 7 件 (12.7%)       | 32 件 (58.2%)       | 10 件 (18.2%)      |
| 6-9m     | 3 件 (7.1%)        | 8 件 (19.0%)       | 21 件 (50.0%)       | 10 件 (23.8%)      |
| 9-12m    | 4 件 (10.3%)       | 9 件 (23.1%)       | 26 件 (66.7%)       | 0 件 (0.0%)        |
| **平均** | **5.5 件 (11.2%)** | **8.0 件 (16.3%)** | **26.5 件 (54.1%)** | **9.0 件 (18.4%)** |

### 発見

- **積極的+中程度**: 27.6% → 現在の正例（34.7%）とほぼ一致
- **10%基準**: 積極的+中程度を正例とするのと同等
- **意義**: 「1 件でも承諾」より「10%以上受諾」の方が積極性を評価

## 🎯 推奨事項

### 最終推奨: 10%基準

**理由**:

1. **データ量**: 正例 57 件で学習可能
2. **バランス**: 正例率 29.1%でクラス不均衡が軽減
3. **現実性**: 25%タイルが 0.14、中央値 0.18 ～ 0.23 の範囲内
4. **実用性**: 現在の正例と近い水準を維持

### 25%基準は不採用

**理由**:

1. **データ不足**: 正例 22 件（11.2%）
2. **学習困難**: 各期間で正例が 10 件未満
3. **過度に厳格**: 中央値 0.18 ～ 0.23 を大きく上回る
4. **クラス不均衡**: 正例 11.2%は深刻

## 📁 関連ファイル

- `developer_analysis_charts/acceptance_rate_impact_analysis.png`: 受諾率基準の影響
- `developer_analysis_charts/developer_3class_analysis.png`: 開発者 3 分類
- `developer_analysis_charts/developer_3class_performance.png`: 3 分類の性能
- `developer_analysis_charts/developer_3class_analysis.csv`: 3 分類データ

## 💡 結論

現状の「1 件以上承諾」というラベル付けは、受諾率 0.6%のような極端に低い値も含むため、より積極的な開発者を正例として明確化するには**10%基準**が適切。25%基準は厳格すぎて学習に必要なデータ量を確保できない。

---

**作成日**: 2024 年 10 月 31 日
