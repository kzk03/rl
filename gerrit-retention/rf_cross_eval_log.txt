=========================================
Random Forest Baseline - 4×4クロス評価
K-Fold CV版（閾値決定あり）
=========================================


=========================================
[1/16] train_0-3m / eval_0-3m
=========================================
訓練期間: 2020-01-01 ~ 2022-01-01
訓練 FW: 0 ~ 3ヶ月
評価スナップショット: 2022-01-01
評価 FW: 0 ~ 3ヶ月
出力: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_0-3m

⏭️  結果が既に存在します。スキップ。

=========================================
[2/16] train_0-3m / eval_3-6m
=========================================
訓練期間: 2020-01-01 ~ 2022-01-01
訓練 FW: 0 ~ 3ヶ月
評価スナップショット: 2022-04-01
評価 FW: 3 ~ 6ヶ月
出力: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_3-6m

2025-11-11 22:56:40,438 - __main__ - INFO - ================================================================================
2025-11-11 22:56:40,438 - __main__ - INFO - Random Forest Baseline - importants準拠
2025-11-11 22:56:40,438 - __main__ - INFO - ================================================================================
2025-11-11 22:56:40,438 - __main__ - INFO - 訓練期間: 2020-01-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:56:40,438 - __main__ - INFO - 訓練 Future Window: 0 ~ 3ヶ月
2025-11-11 22:56:40,438 - __main__ - INFO - 評価スナップショット: 2022-04-01 00:00:00
2025-11-11 22:56:40,438 - __main__ - INFO - 評価 Future Window: 3 ~ 6ヶ月
2025-11-11 22:56:40,438 - __main__ - INFO - K-Fold CV: 5 folds
2025-11-11 22:56:40,438 - __main__ - INFO - 出力ディレクトリ: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_3-6m
2025-11-11 22:56:40,439 - __main__ - INFO - データ読み込み: /Users/kazuki-h/rl/gerrit-retention/data/review_requests_openstack_multi_5y_detail.csv
2025-11-11 22:56:41,289 - __main__ - INFO - プロジェクト: openstack/nova, レコード数: 27328
2025-11-11 22:56:41,289 - __main__ - INFO - 
訓練データ準備中...
2025-11-11 22:56:41,299 - __main__ - INFO - 訓練期間全体: 2020-01-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:56:41,299 - __main__ - INFO - 特徴量計算期間: 2020-01-01 00:00:00 ~ 2021-10-01 00:00:00
2025-11-11 22:56:41,299 - __main__ - INFO - ラベル計算期間: 2021-10-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:56:41,299 - __main__ - INFO - Future Window: 0 ~ 3ヶ月
2025-11-11 22:56:41,299 - __main__ - INFO - レビュワー候補: 229
2025-11-11 22:56:46,442 - __main__ - INFO - 生成された軌跡数: 88
2025-11-11 22:56:46,442 - __main__ - INFO - 最小依頼数でスキップ: 141
2025-11-11 22:56:46,442 - __main__ - INFO - 総ステップ数: 1848, Positive: 289, Negative: 1559
2025-11-11 22:56:46,443 - __main__ - INFO - 
評価データ準備中...
2025-11-11 22:56:46,451 - __main__ - INFO - 評価スナップショット: 2022-04-01 00:00:00
2025-11-11 22:56:46,451 - __main__ - INFO - Future Window: 3 ~ 6ヶ月
2025-11-11 22:56:46,451 - __main__ - INFO - レビュワー候補: 395
2025-11-11 22:56:47,201 - __main__ - INFO - 生成された評価軌跡数: 145
2025-11-11 22:56:47,201 - __main__ - INFO - 最小依頼数でスキップ: 250
2025-11-11 22:56:47,201 - __main__ - INFO - 総ステップ数: 145, Positive: 22, Negative: 123
2025-11-11 22:56:47,203 - __main__ - INFO - 
特徴量抽出中...
2025-11-11 22:56:48,347 - __main__ - INFO - 訓練データ: (1848, 10), Positive: 289/1848
2025-11-11 22:56:48,347 - __main__ - INFO - 評価データ: (145, 10), Positive: 22/145
2025-11-11 22:56:48,347 - __main__ - INFO - 
モデル訓練開始...
2025-11-11 22:56:48,347 - __main__ - INFO - K-Fold CV (K=5)で閾値を決定中...
2025-11-11 22:56:48,468 - __main__ - INFO -   Fold 1: 閾値 = 0.2975
2025-11-11 22:56:48,572 - __main__ - INFO -   Fold 2: 閾値 = 0.2787
2025-11-11 22:56:48,677 - __main__ - INFO -   Fold 3: 閾値 = 0.3167
2025-11-11 22:56:48,773 - __main__ - INFO -   Fold 4: 閾値 = 0.3084
2025-11-11 22:56:48,878 - __main__ - INFO -   Fold 5: 閾値 = 0.4945
2025-11-11 22:56:48,878 - __main__ - INFO - 最終閾値: 0.3392 (±0.0787)
2025-11-11 22:56:48,878 - __main__ - INFO - 全訓練データでモデル訓練中...
2025-11-11 22:56:48,969 - __main__ - INFO - 
モデル評価中...
2025-11-11 22:56:48,989 - __main__ - INFO - 
================================================================================
2025-11-11 22:56:48,989 - __main__ - INFO - 評価結果
2025-11-11 22:56:48,989 - __main__ - INFO - ================================================================================
2025-11-11 22:56:48,989 - __main__ - INFO - AUC-ROC: 0.9254
2025-11-11 22:56:48,989 - __main__ - INFO - AUC-PR:  0.7875
2025-11-11 22:56:48,989 - __main__ - INFO - F1:      0.7347
2025-11-11 22:56:48,989 - __main__ - INFO - Precision: 0.6667
2025-11-11 22:56:48,989 - __main__ - INFO - Recall:    0.8182
2025-11-11 22:56:48,989 - __main__ - INFO - 閾値:    0.3392 (±0.0787)
2025-11-11 22:56:48,989 - __main__ - INFO - サンプル数: 145 (Pos: 22, Neg: 123)
2025-11-11 22:56:48,989 - __main__ - INFO - 
メトリクス保存: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_3-6m/metrics.json
2025-11-11 22:56:49,008 - __main__ - INFO - モデル保存: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_3-6m/model.pkl
2025-11-11 22:56:49,008 - __main__ - INFO - 
完了!
✅ 完了

=========================================
[3/16] train_0-3m / eval_6-9m
=========================================
訓練期間: 2020-01-01 ~ 2022-01-01
訓練 FW: 0 ~ 3ヶ月
評価スナップショット: 2022-07-01
評価 FW: 6 ~ 9ヶ月
出力: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_6-9m

2025-11-11 22:56:50,340 - __main__ - INFO - ================================================================================
2025-11-11 22:56:50,340 - __main__ - INFO - Random Forest Baseline - importants準拠
2025-11-11 22:56:50,340 - __main__ - INFO - ================================================================================
2025-11-11 22:56:50,341 - __main__ - INFO - 訓練期間: 2020-01-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:56:50,341 - __main__ - INFO - 訓練 Future Window: 0 ~ 3ヶ月
2025-11-11 22:56:50,341 - __main__ - INFO - 評価スナップショット: 2022-07-01 00:00:00
2025-11-11 22:56:50,341 - __main__ - INFO - 評価 Future Window: 6 ~ 9ヶ月
2025-11-11 22:56:50,341 - __main__ - INFO - K-Fold CV: 5 folds
2025-11-11 22:56:50,341 - __main__ - INFO - 出力ディレクトリ: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_6-9m
2025-11-11 22:56:50,341 - __main__ - INFO - データ読み込み: /Users/kazuki-h/rl/gerrit-retention/data/review_requests_openstack_multi_5y_detail.csv
2025-11-11 22:56:51,121 - __main__ - INFO - プロジェクト: openstack/nova, レコード数: 27328
2025-11-11 22:56:51,121 - __main__ - INFO - 
訓練データ準備中...
2025-11-11 22:56:51,131 - __main__ - INFO - 訓練期間全体: 2020-01-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:56:51,131 - __main__ - INFO - 特徴量計算期間: 2020-01-01 00:00:00 ~ 2021-10-01 00:00:00
2025-11-11 22:56:51,132 - __main__ - INFO - ラベル計算期間: 2021-10-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:56:51,132 - __main__ - INFO - Future Window: 0 ~ 3ヶ月
2025-11-11 22:56:51,132 - __main__ - INFO - レビュワー候補: 229
2025-11-11 22:56:56,173 - __main__ - INFO - 生成された軌跡数: 88
2025-11-11 22:56:56,173 - __main__ - INFO - 最小依頼数でスキップ: 141
2025-11-11 22:56:56,173 - __main__ - INFO - 総ステップ数: 1848, Positive: 289, Negative: 1559
2025-11-11 22:56:56,174 - __main__ - INFO - 
評価データ準備中...
2025-11-11 22:56:56,182 - __main__ - INFO - 評価スナップショット: 2022-07-01 00:00:00
2025-11-11 22:56:56,182 - __main__ - INFO - Future Window: 6 ~ 9ヶ月
2025-11-11 22:56:56,182 - __main__ - INFO - レビュワー候補: 402
2025-11-11 22:56:56,994 - __main__ - INFO - 生成された評価軌跡数: 151
2025-11-11 22:56:56,995 - __main__ - INFO - 最小依頼数でスキップ: 251
2025-11-11 22:56:56,995 - __main__ - INFO - 総ステップ数: 151, Positive: 19, Negative: 132
2025-11-11 22:56:56,996 - __main__ - INFO - 
特徴量抽出中...
2025-11-11 22:56:58,148 - __main__ - INFO - 訓練データ: (1848, 10), Positive: 289/1848
2025-11-11 22:56:58,149 - __main__ - INFO - 評価データ: (151, 10), Positive: 19/151
2025-11-11 22:56:58,149 - __main__ - INFO - 
モデル訓練開始...
2025-11-11 22:56:58,149 - __main__ - INFO - K-Fold CV (K=5)で閾値を決定中...
2025-11-11 22:56:58,266 - __main__ - INFO -   Fold 1: 閾値 = 0.2975
2025-11-11 22:56:58,372 - __main__ - INFO -   Fold 2: 閾値 = 0.2787
2025-11-11 22:56:58,476 - __main__ - INFO -   Fold 3: 閾値 = 0.3167
2025-11-11 22:56:58,584 - __main__ - INFO -   Fold 4: 閾値 = 0.3084
2025-11-11 22:56:58,679 - __main__ - INFO -   Fold 5: 閾値 = 0.4945
2025-11-11 22:56:58,679 - __main__ - INFO - 最終閾値: 0.3392 (±0.0787)
2025-11-11 22:56:58,679 - __main__ - INFO - 全訓練データでモデル訓練中...
2025-11-11 22:56:58,771 - __main__ - INFO - 
モデル評価中...
2025-11-11 22:56:58,787 - __main__ - INFO - 
================================================================================
2025-11-11 22:56:58,788 - __main__ - INFO - 評価結果
2025-11-11 22:56:58,788 - __main__ - INFO - ================================================================================
2025-11-11 22:56:58,788 - __main__ - INFO - AUC-ROC: 0.8820
2025-11-11 22:56:58,788 - __main__ - INFO - AUC-PR:  0.6458
2025-11-11 22:56:58,788 - __main__ - INFO - F1:      0.5778
2025-11-11 22:56:58,788 - __main__ - INFO - Precision: 0.5000
2025-11-11 22:56:58,788 - __main__ - INFO - Recall:    0.6842
2025-11-11 22:56:58,788 - __main__ - INFO - 閾値:    0.3392 (±0.0787)
2025-11-11 22:56:58,788 - __main__ - INFO - サンプル数: 151 (Pos: 19, Neg: 132)
2025-11-11 22:56:58,788 - __main__ - INFO - 
メトリクス保存: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_6-9m/metrics.json
2025-11-11 22:56:58,807 - __main__ - INFO - モデル保存: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_6-9m/model.pkl
2025-11-11 22:56:58,807 - __main__ - INFO - 
完了!
✅ 完了

=========================================
[4/16] train_0-3m / eval_9-12m
=========================================
訓練期間: 2020-01-01 ~ 2022-01-01
訓練 FW: 0 ~ 3ヶ月
評価スナップショット: 2022-10-01
評価 FW: 9 ~ 12ヶ月
出力: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_9-12m

2025-11-11 22:57:00,041 - __main__ - INFO - ================================================================================
2025-11-11 22:57:00,041 - __main__ - INFO - Random Forest Baseline - importants準拠
2025-11-11 22:57:00,041 - __main__ - INFO - ================================================================================
2025-11-11 22:57:00,041 - __main__ - INFO - 訓練期間: 2020-01-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:57:00,041 - __main__ - INFO - 訓練 Future Window: 0 ~ 3ヶ月
2025-11-11 22:57:00,041 - __main__ - INFO - 評価スナップショット: 2022-10-01 00:00:00
2025-11-11 22:57:00,041 - __main__ - INFO - 評価 Future Window: 9 ~ 12ヶ月
2025-11-11 22:57:00,041 - __main__ - INFO - K-Fold CV: 5 folds
2025-11-11 22:57:00,041 - __main__ - INFO - 出力ディレクトリ: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_9-12m
2025-11-11 22:57:00,041 - __main__ - INFO - データ読み込み: /Users/kazuki-h/rl/gerrit-retention/data/review_requests_openstack_multi_5y_detail.csv
2025-11-11 22:57:00,840 - __main__ - INFO - プロジェクト: openstack/nova, レコード数: 27328
2025-11-11 22:57:00,840 - __main__ - INFO - 
訓練データ準備中...
2025-11-11 22:57:00,849 - __main__ - INFO - 訓練期間全体: 2020-01-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:57:00,849 - __main__ - INFO - 特徴量計算期間: 2020-01-01 00:00:00 ~ 2021-10-01 00:00:00
2025-11-11 22:57:00,849 - __main__ - INFO - ラベル計算期間: 2021-10-01 00:00:00 ~ 2022-01-01 00:00:00
2025-11-11 22:57:00,849 - __main__ - INFO - Future Window: 0 ~ 3ヶ月
2025-11-11 22:57:00,849 - __main__ - INFO - レビュワー候補: 229
2025-11-11 22:57:06,009 - __main__ - INFO - 生成された軌跡数: 88
2025-11-11 22:57:06,010 - __main__ - INFO - 最小依頼数でスキップ: 141
2025-11-11 22:57:06,010 - __main__ - INFO - 総ステップ数: 1848, Positive: 289, Negative: 1559
2025-11-11 22:57:06,010 - __main__ - INFO - 
評価データ準備中...
2025-11-11 22:57:06,018 - __main__ - INFO - 評価スナップショット: 2022-10-01 00:00:00
2025-11-11 22:57:06,018 - __main__ - INFO - Future Window: 9 ~ 12ヶ月
2025-11-11 22:57:06,018 - __main__ - INFO - レビュワー候補: 422
2025-11-11 22:57:06,925 - __main__ - INFO - 生成された評価軌跡数: 166
2025-11-11 22:57:06,925 - __main__ - INFO - 最小依頼数でスキップ: 256
2025-11-11 22:57:06,925 - __main__ - INFO - 総ステップ数: 166, Positive: 14, Negative: 152
2025-11-11 22:57:06,926 - __main__ - INFO - 
特徴量抽出中...
2025-11-11 22:57:08,101 - __main__ - INFO - 訓練データ: (1848, 10), Positive: 289/1848
2025-11-11 22:57:08,101 - __main__ - INFO - 評価データ: (166, 10), Positive: 14/166
2025-11-11 22:57:08,101 - __main__ - INFO - 
モデル訓練開始...
2025-11-11 22:57:08,101 - __main__ - INFO - K-Fold CV (K=5)で閾値を決定中...
2025-11-11 22:57:08,279 - __main__ - INFO -   Fold 1: 閾値 = 0.2975
2025-11-11 22:57:08,375 - __main__ - INFO -   Fold 2: 閾値 = 0.2787
2025-11-11 22:57:08,467 - __main__ - INFO -   Fold 3: 閾値 = 0.3167
2025-11-11 22:57:08,571 - __main__ - INFO -   Fold 4: 閾値 = 0.3084
2025-11-11 22:57:08,664 - __main__ - INFO -   Fold 5: 閾値 = 0.4945
2025-11-11 22:57:08,664 - __main__ - INFO - 最終閾値: 0.3392 (±0.0787)
2025-11-11 22:57:08,664 - __main__ - INFO - 全訓練データでモデル訓練中...
2025-11-11 22:57:08,756 - __main__ - INFO - 
モデル評価中...
2025-11-11 22:57:08,774 - __main__ - INFO - 
================================================================================
2025-11-11 22:57:08,774 - __main__ - INFO - 評価結果
2025-11-11 22:57:08,774 - __main__ - INFO - ================================================================================
2025-11-11 22:57:08,774 - __main__ - INFO - AUC-ROC: 0.9229
2025-11-11 22:57:08,774 - __main__ - INFO - AUC-PR:  0.6728
2025-11-11 22:57:08,774 - __main__ - INFO - F1:      0.5854
2025-11-11 22:57:08,774 - __main__ - INFO - Precision: 0.4444
2025-11-11 22:57:08,774 - __main__ - INFO - Recall:    0.8571
2025-11-11 22:57:08,774 - __main__ - INFO - 閾値:    0.3392 (±0.0787)
2025-11-11 22:57:08,774 - __main__ - INFO - サンプル数: 166 (Pos: 14, Neg: 152)
2025-11-11 22:57:08,775 - __main__ - INFO - 
メトリクス保存: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_9-12m/metrics.json
2025-11-11 22:57:08,793 - __main__ - INFO - モデル保存: experiments/nova_review_acceptance/results_rf_cv/train_0-3m/eval_9-12m/model.pkl
2025-11-11 22:57:08,793 - __main__ - INFO - 
完了!
✅ 完了

=========================================
[5/16] train_3-6m / eval_0-3m
=========================================
訓練期間: 2020-04-01 ~ 2022-04-01
訓練 FW: 3 ~ 6ヶ月
評価スナップショット: 2022-01-01
評価 FW: 0 ~ 3ヶ月
出力: experiments/nova_review_acceptance/results_rf_cv/train_3-6m/eval_0-3m

2025-11-11 22:57:10,003 - __main__ - INFO - ================================================================================
2025-11-11 22:57:10,003 - __main__ - INFO - Random Forest Baseline - importants準拠
2025-11-11 22:57:10,003 - __main__ - INFO - ================================================================================
2025-11-11 22:57:10,003 - __main__ - INFO - 訓練期間: 2020-04-01 00:00:00 ~ 2022-04-01 00:00:00
2025-11-11 22:57:10,003 - __main__ - INFO - 訓練 Future Window: 3 ~ 6ヶ月
2025-11-11 22:57:10,003 - __main__ - INFO - 評価スナップショット: 2022-01-01 00:00:00
2025-11-11 22:57:10,003 - __main__ - INFO - 評価 Future Window: 0 ~ 3ヶ月
2025-11-11 22:57:10,003 - __main__ - INFO - K-Fold CV: 5 folds
2025-11-11 22:57:10,003 - __main__ - INFO - 出力ディレクトリ: experiments/nova_review_acceptance/results_rf_cv/train_3-6m/eval_0-3m
2025-11-11 22:57:10,003 - __main__ - INFO - データ読み込み: /Users/kazuki-h/rl/gerrit-retention/data/review_requests_openstack_multi_5y_detail.csv
2025-11-11 22:57:10,803 - __main__ - INFO - プロジェクト: openstack/nova, レコード数: 27328
2025-11-11 22:57:10,803 - __main__ - INFO - 
訓練データ準備中...
2025-11-11 22:57:10,811 - __main__ - INFO - 訓練期間全体: 2020-04-01 00:00:00 ~ 2022-04-01 00:00:00
2025-11-11 22:57:10,811 - __main__ - INFO - 特徴量計算期間: 2020-04-01 00:00:00 ~ 2021-10-01 00:00:00
2025-11-11 22:57:10,811 - __main__ - INFO - ラベル計算期間: 2021-10-01 00:00:00 ~ 2022-04-01 00:00:00
2025-11-11 22:57:10,811 - __main__ - INFO - Future Window: 3 ~ 6ヶ月
2025-11-11 22:57:10,811 - __main__ - INFO - レビュワー候補: 224
2025-11-11 22:57:15,457 - __main__ - INFO - 生成された軌跡数: 88
2025-11-11 22:57:15,457 - __main__ - INFO - 最小依頼数でスキップ: 136
2025-11-11 22:57:15,457 - __main__ - INFO - 総ステップ数: 1584, Positive: 329, Negative: 1255
2025-11-11 22:57:15,459 - __main__ - INFO - 
評価データ準備中...
2025-11-11 22:57:15,466 - __main__ - INFO - 評価スナップショット: 2022-01-01 00:00:00
2025-11-11 22:57:15,466 - __main__ - INFO - Future Window: 0 ~ 3ヶ月
2025-11-11 22:57:15,467 - __main__ - INFO - レビュワー候補: 367
