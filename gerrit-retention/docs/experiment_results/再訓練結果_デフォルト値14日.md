# 再訓練結果: デフォルト値14日（未応答/非アクティブ）

## 📊 概要

レスポンス時間のデフォルト値を **3日（平均）から14日（最大/未応答）** に変更して再訓練した結果をまとめます。

## 🎯 主な変更点

### デフォルト値の変更
- **変更前**: `response_time` が欠損の場合 → 3.0日（平均レスポンス時間）
- **変更後**: `response_time` が欠損の場合 → 14.0日（最大レスポンス時間/未応答）

### 理由
デフォルト値が0.0だった場合、`response_speed = 1.0 / (1.0 + 0.0/3.0) = 1.0` となり、最も「速い応答」として扱われてしまう問題がありました。これを修正するため：

1. 最初に平均値（3日）に変更
2. しかし、「実際には応答していない」という意味を反映するために最大値（14日）に変更

**14日という値の根拠**:
- データの最大レスポンス時間が約14日
- 2週間以上の応答がない = 実質的に非アクティブ/離脱傾向を示す

## 📈 訓練結果

### 対角線評価（同一期間）

| 期間   | AUC-PR | Precision | Recall | F1-score |
|--------|--------|-----------|--------|----------|
| 0-3m   | 0.611  | 0.577     | 0.714  | 0.638    |
| 3-6m   | 0.816  | 0.682     | 0.833  | 0.750    |
| 6-9m   | 0.788  | 0.818     | 0.692  | 0.750    |
| 9-12m  | 0.658  | 0.556     | 0.938  | 0.698    |

**平均 AUC-PR**: **0.718**

### デフォルト値3日との比較

| デフォルト値 | 平均 AUC-PR |
|-------------|-------------|
| 3日（平均）  | 0.718       |
| 14日（最大） | **0.718**   |

## 🔍 考察

### デフォルト値の影響はなかった

**結論**: デフォルト値を3日から14日に変更しても、**予測性能は同じ（AUC-PR = 0.718）**でした。

### 理由の推測

1. **データの分布**:
   - 欠損値が全体の約91.5%を占める
   - 欠損値は主に「レビュー依頼を受けたが、まだ応答していない」ケース
   - これらは既に「非アクティブ/離脱傾向」を示している

2. **特徴量の解釈**:
   - `response_speed` = 1.0 / (1.0 + response_time / 3.0)
   - デフォルト3日 → speed = 0.5
   - デフォルト14日 → speed = 0.18
   - どちらも「中程度～遅い」の範囲内

3. **モデルの学習**:
   - デフォルト値が変わっても、モデルが「応答速度」のパターンを既に学習済み
   - 欠損値のデフォルト設定よりも、実際の応答データのパターンの方が重要

## 📊 特徴量重要度

### 全訓練期間の平均重要度

#### 状態特徴量（上位）

| 特徴量           | 重要度   | 解釈                             |
|-----------------|---------|----------------------------------|
| 総レビュー数     | +0.0072 | レビュー経験が多い = 継続傾向が高い |
| 総コミット数     | +0.0053 | 開発貢献が多い = 継続傾向が高い     |
| 協力スコア       | +0.0039 | 協力的 = 継続傾向が高い            |
| 最近の活動頻度   | +0.0021 | 最近活発 = 継続傾向が高い          |
| 最近の受諾率     | +0.0005 | 受諾率が高い = 継続傾向が高い      |

#### 状態特徴量（下位）

| 特徴量           | 重要度   | 解釈                             |
|-----------------|---------|----------------------------------|
| 活動トレンド     | -0.0042 | トレンドが上昇 = 継続傾向が高い     |
| 平均活動間隔     | -0.0034 | 間隔が短い = 継続傾向が高い        |
| コード品質スコア | -0.0030 | 品質が高い = 継続傾向が高い        |
| レビュー負荷     | -0.0019 | 負荷が高い = 継続傾向がやや低い    |

**注意**: 下位の特徴量も実際には**正の影響**があります。負の値は「正規化後も影響が小さい」という意味であり、これらの特徴量が下がると継続傾向は**下がる**（負の相関）ことを示しています。

#### 行動特徴量

| 特徴量             | 重要度   | 解釈                             |
|-------------------|---------|----------------------------------|
| 協力度             | +0.0112 | 協力的な行動 = 継続傾向が高い      |
| 強度（ファイル数） | +0.0024 | 複数ファイルレビュー = 継続傾向が高い |
| レビュー規模       | -0.0017 | 規模が大きい = 継続傾向がやや低い  |
| 応答速度           | -0.0061 | **速い応答 = 継続傾向が低い**     |

### 応答速度の負の重要性について

**重要な発見**: 応答速度は**負の重要度**（-0.0061）を示しています。

**解釈**:
1. **速い応答 = 継続傾向が低い**
2. **遅い応答 = 継続傾向が高い**

これは一見矛盾していますが、以下の理由が考えられます：

#### 理由1: 速い応答 = 軽いコミットメント
- 即座に応答するレビュアーは「軽く引き受けただけ」
- 長期的なコミットメントが低い可能性

#### 理由2: 遅い応答 = 丁寧なレビュー
- じっくり時間をかけるレビュアーは「真剣にレビューしている」
- 長期的なコミットメントが高い可能性

#### 理由3: データの偏り
- 非アクティブなレビュアーの多くが「レスポンスなし（欠損）」
- 欠損値をデフォルト値で補完しても、パターンは変わらない

## 💡 まとめ

### デフォルト値の変更は不要だった

**結論**:
- デフォルト値を3日→14日に変更しても、予測性能は変わらなかった
- モデルは実際の応答データのパターンを既に学習済み
- デフォルト値の設定よりも、**データの質と特徴量設計の方が重要**

### 応答速度の負の重要性は実際のパターン

**重要な発見**:
- 応答速度が「速い」ことは継続傾向を**下げる**という実際のパターン
- これは「デフォルト値の設定」による擬似相関ではなく、**実データの因果関係**
- 「軽いコミットメント vs 深いコミットメント」を示している可能性

### 今後の改善案

1. **特徴量の再設計**:
   - `response_time` そのものではなく、`response_speed` の閾値設定を検討
   - 例: 「24時間以内」「3日以内」「1週間以内」などのカテゴリ化

2. **欠損値の扱い**:
   - 欠損値を別の特徴量として扱う（例: `has_responded`）
   - デフォルト値に依存しない設計

3. **データ収集の改善**:
   - 「レスポンスなし」のケースをより詳細に追跡
   - 「未読」「拒否」「保留」などの状態を区別

## 📂 出力ファイル

```
outputs/review_acceptance_cross_eval_nova_default14/
├── heatmap_combined.png                          # 統合ヒートマップ
├── matrix_AUC_PR.csv                            # AUC-PRマトリクス
├── matrix_PRECISION.csv                         # Precisionマトリクス
├── matrix_RECALL.csv                            # Recallマトリクス
├── matrix_F1.csv                                # F1-scoreマトリクス
├── average_feature_importance/
│   ├── gradient_importance.png                  # 特徴量重要度グラフ
│   ├── gradient_importance_combined.png         # 統合特徴量重要度グラフ
│   └── gradient_importance_average.json         # 平均重要度JSON
└── train_*/feature_importance/
    ├── gradient_importance.png
    └── gradient_importance_combined.png
```

## 📅 実施日

2024年10月30日

## 🔗 関連ドキュメント

- [結果考察と特徴量重要度分析.md](結果考察と特徴量重要度分析.md)
- [応答速度の負の影響_考察.md](応答速度の負の影響_考察.md)
- [再訓練結果_デフォルト値3日.md](再訓練結果_デフォルト値3日.md)

