# スライディングウィンドウ クロス評価結果 特徴量分析レポート

## 概要

本レポートは、スライディングウィンドウ クロス評価結果（`outputs/sliding_cross_eval_nova`）で使用された特徴量の詳細分析結果をまとめたものです。

## 1. 使用されたモデルと特徴量構成

### モデル情報

- **モデル名**: 通常 IRL（RetentionIRLSystem）
- **アーキテクチャ**: LSTM + 全結合層
- **学習手法**: 逆強化学習（Inverse Reinforcement Learning）
- **評価対象**: OpenStack Nova プロジェクト

### 特徴量構成

- **State 特徴量**: 10 次元
- **Action 特徴量**: 5 次元
- **総特徴量数**: 15 次元

## 2. 特徴量の詳細定義

### State 特徴量（10 次元）

| インデックス | 特徴量名           | 説明                   | 正規化方法                                                                       |
| ------------ | ------------------ | ---------------------- | -------------------------------------------------------------------------------- |
| 0            | 経験日数           | 開発者としての経験年数 | 年単位で正規化                                                                   |
| 1            | 総変更数           | これまでの総変更数     | ÷100 で正規化                                                                    |
| 2            | 総レビュー数       | これまでの総レビュー数 | ÷100 で正規化                                                                    |
| 3            | プロジェクト数     | 関わったプロジェクト数 | ÷10 で正規化                                                                     |
| 4            | 最近の活動頻度     | 最近の活動頻度         | そのまま                                                                         |
| 5            | 平均活動間隔       | 活動間の平均間隔       | 月単位で正規化                                                                   |
| 6            | 活動トレンド       | 活動の傾向             | エンコーディング（increasing: 1.0, stable: 0.5, decreasing: 0.0, unknown: 0.25） |
| 7            | 協力スコア         | 協力活動の割合         | 0-1 範囲                                                                         |
| 8            | コード品質スコア   | コードの品質スコア     | そのまま                                                                         |
| 9            | 時間経過（新鮮さ） | 現在時刻からの経過日数 | 年単位で正規化                                                                   |

### Action 特徴量（5 次元）

| インデックス | 特徴量名       | 説明                   | エンコーディング                                                                                       |
| ------------ | -------------- | ---------------------- | ------------------------------------------------------------------------------------------------------ |
| 0            | 行動タイプ     | 行動の種類             | commit: 1.0, review: 0.8, merge: 0.9, documentation: 0.6, issue: 0.4, collaboration: 0.7, unknown: 0.1 |
| 1            | 行動の強度     | 行動の強度             | そのまま                                                                                               |
| 2            | 行動の質       | 行動の質               | そのまま                                                                                               |
| 3            | 協力度         | 協力の度合い           | そのまま                                                                                               |
| 4            | タイムスタンプ | 現在時刻からの経過日数 | 年単位で正規化                                                                                         |

## 3. 特徴量重要度分析結果

### 分析対象

- **モデル**: train_0-3m（0-3 ヶ月訓練モデル）
- **評価期間**: 2023-01-01 ～ 2024-01-01
- **サンプル数**: 260
- **ベースライン AUC-ROC**: 0.7750

### Permutation Importance（置換重要度）

#### State 特徴量（重要度順）

| 順位 | 特徴量名               | 重要度    | 影響      |
| ---- | ---------------------- | --------- | --------- |
| 1    | **時間経過（新鮮さ）** | +0.016848 | ⭐ 最重要 |
| 2    | 平均活動間隔           | -0.010372 | 負の影響  |
| 3    | 総レビュー数           | -0.004909 | 負の影響  |
| 4    | 最近の活動頻度         | +0.002335 | 正の影響  |
| 5    | コード品質スコア       | +0.000627 | 正の影響  |
| 6    | 活動トレンド           | -0.000614 | 負の影響  |
| 7    | 総変更数               | +0.000283 | 正の影響  |
| 8    | 協力スコア             | -0.000160 | 負の影響  |
| 9    | 経験日数               | +0.000074 | 正の影響  |
| 10   | プロジェクト数         | +0.000061 | 正の影響  |

#### Action 特徴量（重要度順）

| 順位 | 特徴量名           | 重要度    | 影響      |
| ---- | ------------------ | --------- | --------- |
| 1    | **タイムスタンプ** | +0.027232 | ⭐ 最重要 |
| 2    | 行動タイプ         | -0.000676 | 負の影響  |
| 3    | 協力度             | -0.000406 | 負の影響  |
| 4    | 行動の強度         | +0.000258 | 正の影響  |
| 5    | 行動の質           | +0.000111 | 正の影響  |

### Gradient-based Importance（勾配重要度）

#### State 特徴量（重要度順）

| 順位 | 特徴量名               | 重要度    | 影響      |
| ---- | ---------------------- | --------- | --------- |
| 1    | **時間経過（新鮮さ）** | +0.040425 | ⭐ 最重要 |
| 2    | 平均活動間隔           | +0.025001 | 正の影響  |
| 3    | 総レビュー数           | +0.007417 | 正の影響  |
| 4    | プロジェクト数         | +0.006628 | 正の影響  |
| 5    | コード品質スコア       | +0.006450 | 正の影響  |
| 6    | 最近の活動頻度         | +0.004928 | 正の影響  |
| 7    | 総変更数               | +0.003401 | 正の影響  |
| 8    | 活動トレンド           | +0.003148 | 正の影響  |
| 9    | 協力スコア             | +0.002326 | 正の影響  |
| 10   | 経験日数               | +0.001903 | 正の影響  |

#### Action 特徴量（重要度順）

| 順位 | 特徴量名           | 重要度    | 影響      |
| ---- | ------------------ | --------- | --------- |
| 1    | **タイムスタンプ** | +0.000384 | ⭐ 最重要 |
| 2    | 行動の質           | +0.000095 | 正の影響  |
| 3    | 行動タイプ         | +0.000054 | 正の影響  |
| 4    | 行動の強度         | +0.000043 | 正の影響  |
| 5    | 協力度             | +0.000039 | 正の影響  |

## 4. 重要な発見と解釈

### 🏆 最重要特徴量

1. **State 特徴量**: **時間経過（新鮮さ）**

   - Permutation: +0.016848
   - Gradient: +0.040425
   - 両手法で最も重要な予測因子

2. **Action 特徴量**: **タイムスタンプ**
   - Permutation: +0.027232
   - Gradient: +0.000384
   - 行動の時間情報が継続予測に大きく影響

### 📊 特徴量の解釈

#### 時間関連特徴量の重要性

- **データの新鮮さ**が継続予測の最重要因子
- 過去の活動よりも**現在の時間情報**が重要
- これは**データリークの可能性**を示唆

#### 活動パターンの影響

- **平均活動間隔**: Permutation では負、Gradient では正の影響
- **総レビュー数**: 活動量が多いほど継続しやすい傾向
- **最近の活動頻度**: 最近活発な開発者は継続しやすい

#### 手法間の差異

- **Permutation vs Gradient**: 重要度の符号が異なる特徴量が存在
- **Permutation**: より保守的な重要度評価
- **Gradient**: より敏感な重要度評価

### ⚠️ 注意点と課題

#### データリークの可能性

- **時間経過特徴量**が最重要であることは、未来の情報が含まれている可能性を示唆
- 実際の運用時には利用できない情報の可能性

#### 特徴量の解釈性

- **時間情報**に依存しすぎている可能性
- より**意味のある特徴量**（活動内容、協力パターンなど）の重要性が低い

#### 手法間の不一致

- Permutation と Gradient で重要度の解釈が異なる
- より詳細な検証が必要

## 5. 今後の改善提案

### 特徴量の改善

1. **時間経過特徴量の除去**: データリークを防ぐため
2. **より意味のある特徴量の追加**: コードの複雑さ、レビューの質など
3. **プロジェクト固有特徴量**: プロジェクトの特性を反映

### モデルの改善

1. **時間情報に依存しないモデル**: より汎用的な予測
2. **特徴量選択**: 重要度の低い特徴量の除去
3. **正則化**: 過学習の防止

## 6. 結論

スライディングウィンドウ クロス評価で使用された特徴量の分析により、以下のことが明らかになりました：

1. **時間経過特徴量**が最も重要な予測因子
2. **行動のタイムスタンプ情報**も重要な役割
3. **データリークの可能性**が存在
4. **手法間で重要度の解釈が異なる**場合がある

これらの発見は、今後のモデル改善と特徴量設計に重要な示唆を提供します。

---

**分析日時**: 2025-10-29  
**分析対象**: outputs/sliding_cross_eval_nova/train_0-3m  
**分析手法**: Permutation Importance, Gradient-based Importance
