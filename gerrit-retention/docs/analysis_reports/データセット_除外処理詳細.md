# データセット除外処理の詳細

## 概要

レビュー承諾予測モデルにおけるデータ除外処理の詳細をまとめる。

---

## 1. 除外前のデータ（訓練期間別）

### 期間 0-3m (2022-10-01 ～ 2023-01-01)

| 項目 | 値 |
|------|------|
| 総レビュー依頼数 | 928件 |
| レビュアー数 | 67人 |
| 承諾依頼数 | 113件 (12.2%) |
| 拒否依頼数 | 815件 (87.8%) |

### 期間 3-6m (2022-07-01 ～ 2023-01-01)

| 項目 | 値 |
|------|------|
| 総レビュー依頼数 | 2,415件 |
| レビュアー数 | 102人 |
| 承諾依頼数 | 298件 (12.3%) |
| 拒否依頼数 | 2,117件 (87.7%) |

### 期間 6-9m (2022-04-01 ～ 2023-01-01)

| 項目 | 値 |
|------|------|
| 総レビュー依頼数 | 4,053件 |
| レビュアー数 | 120人 |
| 承諾依頼数 | 404件 (10.0%) |
| 拒否依頼数 | 3,649件 (90.0%) |

### 期間 9-12m (2022-01-01 ～ 2023-01-01)

| 項目 | 値 |
|------|------|
| 総レビュー依頼数 | 5,473件 |
| レビュアー数 | 167人 |
| 承諾依頼数 | 577件 (10.5%) |
| 拒否依頼数 | 4,896件 (89.5%) |

---

## 2. 除外条件

以下の条件に該当するレビュアーはデータセットから除外される：

### 条件1: 最小レビュー依頼数未満

- **閾値**: 訓練期間中にレビュー依頼が**3件未満**
- **理由**: 活動履歴が少なすぎて特徴量計算が不安定
- **除外数**:
  - 0-3m: 34人 (50.7%)
  - 3-6m: 55人 (53.9%)
  - 6-9m: 63人 (52.5%)
  - 9-12m: 90人 (53.9%)

### 条件2: 予測期間+拡張期間に依頼なし

- **閾値**: 予測期間開始から12ヶ月以内にレビュー依頼が**0件**
- **理由**: 本当に離脱した開発者（予測対象外）
- **除外数**:
  - 0-3m: 3人 (4.5%)
  - 3-6m: 12人 (11.8%)
  - 6-9m: 16人 (13.3%)
  - 9-12m: 27人 (16.2%)

### 除外合計

| 期間 | 元のレビュアー数 | 除外数 | 除外率 |
|------|------------------|--------|--------|
| 0-3m | 67人 | 37人 | **55.2%** |
| 3-6m | 102人 | 67人 | **65.7%** |
| 6-9m | 120人 | 79人 | **65.8%** |
| 9-12m | 167人 | 117人 | **70.1%** |

**観察**: 訓練期間が長いほど除外率が高くなる傾向（55.2% → 70.1%）

---

## 3. 除外後のデータ（評価用レビュアー）

### クロス評価の特徴

クロス評価では、**評価期間ごとに固定されたレビュアーセット**を使用する。
訓練期間に関係なく、評価期間が同じなら同じレビュアーが評価対象となる。

### 評価期間別のレビュアー数

| 評価期間 | レビュアー数 | 継続 | 離脱 | 継続率 |
|----------|-------------|------|------|--------|
| 0-3m | **60人** | 21人 | 39人 | 35.0% |
| 3-6m | **55人** | 18人 | 37人 | 32.7% |
| 6-9m | **42人** | 13人 | 29人 | 31.0% |
| 9-12m | **39人** | 16人 | 23人 | 41.0% |
| **合計** | **196人** | **68人** | **128人** | **34.7%** |

**注**: 196人は各評価期間の合計（重複なし、評価期間ごとに異なるレビュアー）

### 評価期間別の依頼数統計

#### 評価期間 0-3m (60人)

| 項目 | 値 |
|------|------|
| 訓練期間の総依頼数 | 11,238件 |
| 1人あたり平均依頼数 | 187.3件 |
| 1人あたり中央依頼数 | 20件 |
| 評価期間の総依頼数 | 1,117件 |
| 1人あたり平均依頼数（評価） | 18.6件 |

#### 評価期間 3-6m (55人)

| 項目 | 値 |
|------|------|
| 訓練期間の総依頼数 | 11,175件 |
| 1人あたり平均依頼数 | 203.2件 |
| 1人あたり中央依頼数 | 21件 |
| 評価期間の総依頼数 | 794件 |
| 1人あたり平均依頼数（評価） | 14.4件 |

#### 評価期間 6-9m (42人)

| 項目 | 値 |
|------|------|
| 訓練期間の総依頼数 | 6,154件 |
| 1人あたり平均依頼数 | 146.5件 |
| 1人あたり中央依頼数 | 23件 |
| 評価期間の総依頼数 | 437件 |
| 1人あたり平均依頼数（評価） | 10.4件 |

#### 評価期間 9-12m (39人)

| 項目 | 値 |
|------|------|
| 訓練期間の総依頼数 | 6,137件 |
| 1人あたり平均依頼数 | 157.4件 |
| 1人あたり中央依頼数 | 44件 |
| 評価期間の総依頼数 | 619件 |
| 1人あたり平均依頼数（評価） | 15.9件 |

---

## 4. 訓練用 vs 評価用の分割

### 分割方法

- **方針**: レビュアー単位で80/20に分割
- **ランダムシード**: 42（再現性確保）
- **データリーク防止**: 同一レビュアーが訓練と評価の両方に出現しない

### 推定訓練用レビュアー数

評価用レビュアー数から逆算（20% = 評価用）:

| 評価期間 | 評価用<br>(20%) | 推定訓練用<br>(80%) | 推定合計<br>(100%) |
|----------|----------------|---------------------|-------------------|
| 0-3m | 60人 | 240人 | 300人 |
| 3-6m | 55人 | 220人 | 275人 |
| 6-9m | 42人 | 168人 | 210人 |
| 9-12m | 39人 | 156人 | 195人 |

**注**: 訓練用レビュアー数は推定値（実際の予測ファイルには含まれていない）

---

## 5. 除外率の分析

### 5.1 訓練期間による除外率の変化

```
0-3m:  55.2%除外 (67人 → 30人使用)
3-6m:  65.7%除外 (102人 → 35人使用)
6-9m:  65.8%除外 (120人 → 41人使用)
9-12m: 70.1%除外 (167人 → 50人使用)
```

**傾向**: 訓練期間が長いほど除外率が高い

**理由**:
1. 長期間にわたって継続的に活動するレビュアーは少ない
2. 一時的に活動したが、長期では離脱するレビュアーが多い
3. 最小レビュー依頼数（3件）の条件を満たせないレビュアーが増加

### 5.2 除外理由の内訳（推定）

| 期間 | 条件1<br>(依頼<3件) | 条件2<br>(未来依頼なし) | 合計 |
|------|-------------------|----------------------|------|
| 0-3m | 34人 (91.9%) | 3人 (8.1%) | 37人 |
| 3-6m | 55人 (82.1%) | 12人 (17.9%) | 67人 |
| 6-9m | 63人 (79.7%) | 16人 (20.3%) | 79人 |
| 9-12m | 90人 (76.9%) | 27人 (23.1%) | 117人 |

**主要な除外理由**: 訓練期間のレビュー依頼が3件未満（約80-90%）

---

## 6. 承諾率の分析

### 訓練期間の承諾率

| 期間 | 承諾 | 拒否 | 承諾率 |
|------|------|------|--------|
| 0-3m | 113件 | 815件 | 12.2% |
| 3-6m | 298件 | 2,117件 | 12.3% |
| 6-9m | 404件 | 3,649件 | 10.0% |
| 9-12m | 577件 | 4,896件 | 10.5% |

**観察**: 承諾率は約10-12%で安定（非常に低い）

**意味**: レビュー依頼の約90%は拒否または無視される

---

## 7. 論文用の要約

### 日本語

```
データセットの前処理として、以下の条件でレビュアーを除外した：
(1) 訓練期間中のレビュー依頼が3件未満、
(2) 予測期間開始から12ヶ月以内にレビュー依頼が0件。

除外率は訓練期間により55.2%〜70.1%で、主な除外理由は
レビュー依頼数不足（約80-90%）であった。

除外後のデータセットは、評価期間ごとに固定されたレビュアーセットを使用し、
評価用レビュアー数は39人（9-12m期間）から60人（0-3m期間）まで変動した。
全評価期間の合計は196人（重複なし）で、継続率は34.7%であった。

訓練用レビュアーは評価用の4倍（80/20分割）と推定され、
合計195人〜300人のレビュアーがモデルの訓練と評価に使用された。
```

### 英語

```
As preprocessing, reviewers were excluded based on two conditions:
(1) fewer than 3 review requests during training period,
(2) zero review requests within 12 months from prediction period start.

Exclusion rates ranged from 55.2% to 70.1% across training periods,
with insufficient review requests being the primary reason (80-90%).

The post-exclusion dataset used a fixed reviewer set per evaluation period,
with evaluation reviewers ranging from 39 (9-12m) to 60 (0-3m).
Total unique reviewers across all evaluation periods was 196, with a
continuation rate of 34.7%.

Training reviewers were estimated to be 4× evaluation reviewers (80/20 split),
resulting in 195-300 total reviewers used for model training and evaluation.
```

---

## 8. LaTeX表（論文用）

```latex
\begin{table}[h]
    \centering
    \caption{データ除外処理の統計}
    \label{tab:exclusion_statistics}
    \begin{tabular}{lcccc}
        \toprule
        \textbf{期間} & \textbf{除外前} & \textbf{除外数} & \textbf{除外率} & \textbf{使用} \\
        \midrule
        0-3m & 67人 & 37人 & 55.2\% & 30人 \\
        3-6m & 102人 & 67人 & 65.7\% & 35人 \\
        6-9m & 120人 & 79人 & 65.8\% & 41人 \\
        9-12m & 167人 & 117人 & 70.1\% & 50人 \\
        \bottomrule
    \end{tabular}
\end{table}

\begin{table}[h]
    \centering
    \caption{評価用レビュアーの統計（評価期間別）}
    \label{tab:evaluation_reviewers}
    \begin{tabular}{lccccc}
        \toprule
        \textbf{評価期間} & \textbf{レビュアー} & \textbf{継続} & \textbf{離脱} & \textbf{継続率} & \textbf{平均依頼数} \\
        \midrule
        0-3m & 60人 & 21 & 39 & 35.0\% & 187.3件 \\
        3-6m & 55人 & 18 & 37 & 32.7\% & 203.2件 \\
        6-9m & 42人 & 13 & 29 & 31.0\% & 146.5件 \\
        9-12m & 39人 & 16 & 23 & 41.0\% & 157.4件 \\
        \midrule
        \textbf{合計} & \textbf{196人} & \textbf{68} & \textbf{128} & \textbf{34.7\%} & \textbf{173.6件} \\
        \bottomrule
    \end{tabular}
\end{table}

\begin{table}[h]
    \centering
    \caption{除外理由の内訳}
    \label{tab:exclusion_breakdown}
    \begin{tabular}{lccc}
        \toprule
        \textbf{期間} & \textbf{依頼<3件} & \textbf{未来依頼なし} & \textbf{合計} \\
        \midrule
        0-3m & 34人 (91.9\%) & 3人 (8.1\%) & 37人 \\
        3-6m & 55人 (82.1\%) & 12人 (17.9\%) & 67人 \\
        6-9m & 63人 (79.7\%) & 16人 (20.3\%) & 79人 \\
        9-12m & 90人 (76.9\%) & 27人 (23.1\%) & 117人 \\
        \bottomrule
    \end{tabular}
\end{table}
```

---

## 9. 重要な発見

### 9.1 高い除外率

- 約55-70%のレビュアーが除外される
- 主な理由: 活動履歴不足（3件未満）

### 9.2 低い承諾率

- レビュー依頼の承諾率は約10-12%
- 約90%のレビュー依頼は拒否または無視される

### 9.3 継続率の低さ

- 予測期間中の継続率は約35%
- 約65%のレビュアーが離脱

### 9.4 固定評価セット

- 評価期間ごとに固定されたレビュアーセットを使用
- 訓練期間に関係なく、評価期間が同じなら同じレビュアーが評価対象

---

## 10. 実務的示唆

### 10.1 モデルの適用範囲

モデルは以下の条件を満たすレビュアーに対してのみ有効：
1. 訓練期間中に3件以上のレビュー依頼を受けている
2. 予測期間開始から12ヶ月以内にレビュー依頼を受ける可能性がある

### 10.2 新規レビュアーへの適用

- 活動履歴が3件未満の新規レビュアーには適用不可
- 最低3件のレビュー依頼履歴が必要

### 10.3 長期予測の課題

- 訓練期間が長いほど除外率が高い（70.1%）
- 長期間継続的に活動するレビュアーは少ない
