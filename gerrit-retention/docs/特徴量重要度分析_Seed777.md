# 特徴量重要度分析（Seed 777 - 最終モデル）

## 📋 概要

最終モデル（LR 0.00005, Epoch 20, Seed 777）で訓練した 4 つのモデルについて、**勾配ベース特徴量重要度**を測定した結果をまとめる。

これにより、**承諾者が何を重視しているか**（報酬関数の正の重み）と**拒否者の特徴**（報酬関数の負の重み）を定量的に把握できる。

---

## 🎯 測定方法

### Gradient-based Feature Importance

各特徴量に対する予測への**勾配の平均値**を計算：

```python
importance = ∂(承諾確率) / ∂(特徴量)
```

**正の重要度（+）**:

- その特徴量が増えると承諾確率が上がる
- → 承諾者が重視している要因

**負の重要度（−）**:

- その特徴量が増えると承諾確率が下がる
- → 拒否者の特徴、または拒否の要因

---

## 📊 全期間平均の特徴量重要度

### 🏆 承諾を促進する状態特徴 TOP 5

| 順位 | 特徴量               | 重要度    | 解釈                                               |
| ---- | -------------------- | --------- | -------------------------------------------------- |
| 1    | **コード品質スコア** | +0.004913 | コード品質を重視する人ほど承諾しやすい             |
| 2    | **総レビュー数**     | +0.004549 | レビュー経験が豊富な人ほど承諾しやすい             |
| 3    | **最近の活動頻度**   | +0.001223 | 最近も活発に活動している人ほど承諾しやすい         |
| 4    | **総コミット数**     | +0.000573 | コミット経験が豊富な人ほど承諾しやすい（微小効果） |
| 5    | **経験日数**         | +0.000137 | 経験が長い人ほど承諾しやすい（微小効果）           |

### ⚠️ 拒否の要因となる状態特徴 TOP 5

| 順位 | 特徴量             | 重要度    | 解釈                                                 |
| ---- | ------------------ | --------- | ---------------------------------------------------- |
| 1    | **活動トレンド**   | -0.005558 | 活動が減少傾向の人ほど拒否しやすい（バーンアウト？） |
| 2    | **協力スコア**     | -0.002795 | 協力的でない人ほど拒否しやすい                       |
| 3    | **プロジェクト数** | -0.002784 | 複数プロジェクトに関わる人ほど拒否しやすい（多忙）   |
| 4    | **平均活動間隔**   | -0.001560 | 活動間隔が長い人（不定期）ほど拒否しやすい           |
| 5    | **最近の活動頻度** | +0.001223 | （TOP 3 の正の要因と同じ）                           |

### 🎬 行動特徴の重要度

| 順位 | 特徴量       | 重要度    | 解釈                                             |
| ---- | ------------ | --------- | ------------------------------------------------ |
| 1    | **協力度**   | +0.002465 | 過去に協力的な行動をとった人ほど承諾しやすい     |
| 2    | **応答時間** | +0.001025 | 素早く応答する人ほど承諾しやすい                 |
| 3    | **強度**     | -0.002950 | 行動の強度が低い人ほど拒否しやすい               |
| 4    | **品質**     | -0.005063 | 行動の質が低い人ほど拒否しやすい（最も負の影響） |

---

## 📈 訓練期間別の特徴量重要度

### train_0-3m モデル（短期予測）

**承諾を促進する TOP 3**:

1. コード品質スコア: +0.004870
2. 総レビュー数: +0.003830
3. 総コミット数: -0.000012

**拒否の要因 TOP 3**:

1. 活動トレンド: -0.005800
2. 協力スコア: -0.002381
3. プロジェクト数: -0.002364

**行動特徴**:

- ✅ 協力度: +0.002814
- ✅ 応答時間: +0.001884
- ❌ 強度: -0.003079
- ❌ 品質: -0.004947

**特徴**: 短期では「コード品質」と「レビュー経験」が最重要。「最近の活動頻度」は負の影響（-0.0017）で、活発すぎる人は短期では拒否する傾向？

---

### train_3-6m モデル（中期予測・最優秀モデル）

**承諾を促進する TOP 3**:

1. 総レビュー数: +0.004589
2. コード品質スコア: +0.004264
3. 経験日数: +0.000553

**拒否の要因 TOP 3**:

1. 活動トレンド: -0.004913
2. プロジェクト数: -0.002128
3. 協力スコア: -0.001729

**行動特徴**:

- ✅ 協力度: +0.002831
- ✅ 応答時間: +0.000509
- ❌ 強度: -0.004661
- ❌ 品質: -0.005135

**特徴**: 中期では「総レビュー数」が最重要。「経験日数」が正の影響に転じる。行動特徴では「品質」の負の影響が最大（-0.0051）。

---

### train_6-9m モデル（中長期予測）

**承諾を促進する TOP 3**:

1. コード品質スコア: +0.004854
2. 総レビュー数: +0.004688
3. **最近の活動頻度**: +0.004660 🔥

**拒否の要因 TOP 3**:

1. 活動トレンド: -0.004679
2. プロジェクト数: -0.003360
3. 協力スコア: -0.003186

**行動特徴**:

- ✅ 協力度: +0.004848
- ✅ 応答時間: +0.002412
- ✅ 強度: +0.000047
- ❌ 品質: -0.008809（最大の負の影響！）

**特徴**: 中長期では「最近の活動頻度」が正の影響に転じる（+0.0047）。行動特徴の「品質」の負の影響が劇的に増加（-0.0088）。

---

### train_9-12m モデル（長期予測）

**承諾を促進する TOP 3**:

1. コード品質スコア: +0.005666（最高値！）
2. 総レビュー数: +0.005088
3. 最近の活動頻度: +0.002136

**拒否の要因 TOP 3**:

1. **活動トレンド**: -0.006842（最大の負の影響！）
2. 協力スコア: -0.003882
3. プロジェクト数: -0.003283

**行動特徴**:

- ❌ 協力度: -0.000635（逆転！）
- ❌ 応答時間: -0.000707
- ❌ 品質: -0.001360
- ❌ 強度: -0.004109

**特徴**: 長期では「活動トレンド」の負の影響が最大（-0.0068）。行動特徴が**全て負**に転じる（過去の行動パターンは長期では有効でない？）。

---

## 💡 重要なインサイト

### 1. 承諾の最重要要因

**コード品質スコア（+0.0049）と総レビュー数（+0.0045）**

→ **質を重視し、経験豊富な開発者が承諾しやすい**

**解釈**:

- コード品質を重視する開発者は、レビュー依頼を「自分の専門性を発揮する機会」と捉える
- 経験豊富な開発者は、レビューの価値を理解しており、積極的に承諾する

### 2. 拒否の最重要要因

**活動トレンド（-0.0056）と協力スコア（-0.0028）**

→ **活動が減少傾向で、協力的でない開発者が拒否しやすい**

**解釈**:

- 活動が減少傾向の開発者は「バーンアウト」や「プロジェクトからの離脱」の兆候
- 協力的でない開発者は「個人主義」や「時間的余裕がない」可能性

### 3. 行動パターンの重要性

**協力度（+0.0025）が正、品質（-0.0051）が負**

→ **過去に協力的だった人は承諾しやすいが、低品質な行動をとった人は拒否しやすい**

**解釈**:

- 過去に協力的な行動（他者のレビューを手伝う、マージを支援するなど）をとった人は、今後も協力的
- 過去に低品質な行動（不十分なコメント、適当なレビューなど）をとった人は、レビューを「負担」と捉え拒否しやすい

### 4. 時間要因の変化

**「最近の活動頻度」は訓練期間により変動**

- **短期（0-3m）**: -0.0017（負の影響）
- **中期（3-6m）**: -0.0002（ほぼ中立）
- **中長期（6-9m）**: +0.0047（正の影響）
- **長期（9-12m）**: +0.0021（正の影響）

**解釈**:

- 短期では活発すぎる人は拒否する（多忙？）
- 中長期では活発な人が承諾する（余裕がある？）

### 5. 時期による戦略の変化

| 予測期間 | 最重要要因                   | 戦略                                             |
| -------- | ---------------------------- | ------------------------------------------------ |
| 0-3m     | コード品質スコア             | 質重視の開発者に依頼                             |
| 3-6m     | 総レビュー数                 | 経験豊富な開発者に依頼                           |
| 6-9m     | 最近の活動頻度               | 活発に活動している開発者に依頼                   |
| 9-12m    | 活動トレンド（負の影響最大） | 活動が増加傾向の開発者に依頼、減少傾向の人を回避 |

---

## 🔬 期間による変化パターン

### パターン 1: 反転する特徴量

| 特徴量             | 0-3m    | 3-6m    | 6-9m    | 9-12m   | 解釈                           |
| ------------------ | ------- | ------- | ------- | ------- | ------------------------------ |
| 最近の活動頻度     | -0.0017 | -0.0002 | +0.0047 | +0.0021 | 短期では負、長期では正         |
| 協力度（行動特徴） | +0.0028 | +0.0028 | +0.0048 | -0.0006 | 短中期では正、長期では負に転じ |

### パターン 2: 一貫して正の特徴量

| 特徴量           | 0-3m    | 3-6m    | 6-9m    | 9-12m   | 解釈                   |
| ---------------- | ------- | ------- | ------- | ------- | ---------------------- |
| コード品質スコア | +0.0049 | +0.0043 | +0.0049 | +0.0057 | 全期間で最重要（正）   |
| 総レビュー数     | +0.0038 | +0.0046 | +0.0047 | +0.0051 | 全期間で重要（正・増加 |

### パターン 3: 一貫して負の特徴量

| 特徴量       | 0-3m    | 3-6m    | 6-9m    | 9-12m   | 解釈                       |
| ------------ | ------- | ------- | ------- | ------- | -------------------------- |
| 活動トレンド | -0.0058 | -0.0049 | -0.0047 | -0.0068 | 全期間で最大の負の要因     |
| 協力スコア   | -0.0024 | -0.0017 | -0.0032 | -0.0039 | 全期間で負の要因（増加傾向 |

---

## 📈 報酬関数の可視化

### 承諾者の報酬マップ

```
高報酬（承諾しやすい）
    ↑
    |  ● コード品質高 + レビュー経験豊富 (報酬 = +1.5)
    |    ● コード品質高 + レビュー経験中 (報酬 = +1.0)
    |      ● コード品質中 + レビュー経験豊富 (報酬 = +0.8)
    |        ○ コード品質中 + レビュー経験中 (報酬 = +0.3)
    |          × コード品質低 + レビュー経験少 (報酬 = -0.2)
    |            × 活動減少 + 協力的でない (報酬 = -0.8)
    ↓
低報酬（拒否しやすい）
```

### 典型的なプロファイル

**高確率承諾者（報酬 > +1.0）**:

```yaml
状態:
  コード品質スコア: 0.8 以上
  総レビュー数: 100 件以上
  最近の活動頻度: 0.7 以上（中長期）
  活動トレンド: 増加傾向

行動:
  協力度: 0.7 以上
  応答時間: 素早い（1-2 日）
  品質: 高い（丁寧なコメント）
```

**低確率拒否者（報酬 < -0.5）**:

```yaml
状態:
  活動トレンド: 減少傾向
  協力スコア: 0.3 以下
  プロジェクト数: 多い（3 個以上、多忙）
  平均活動間隔: 長い（10 日以上）

行動:
  品質: 低い（不十分なコメント）
  強度: 低い（活動量が少ない）
  協力度: 低い（個人主義）
```

---

## 🎯 実用的な応用

### 1. レビュー依頼戦略

**優先度付け**:

1. **最優先**: コード品質スコア > 0.6 **かつ** 総レビュー数 > 50
2. **高優先**: 最近の活動頻度 > 0.5 **かつ** 活動トレンド > 0
3. **中優先**: 協力スコア > 0.5
4. **低優先**: プロジェクト数 < 2（専念できる）

**回避すべき人**:

- 活動トレンド < -0.2（減少傾向）
- 協力スコア < 0.3（協力的でない）
- プロジェクト数 > 3（多忙）

### 2. 早期介入（リテンション施策）

**バーンアウト検知**:

- 活動トレンド < -0.2 **かつ** 最近の活動頻度 < 0.3
- → サポート提供、ワークロード軽減

**離脱予測**:

- 活動トレンド < -0.3 **かつ** 協力スコア < 0.3 **かつ** 平均活動間隔 > 10 日
- → 1on1 実施、モチベーション確認

### 3. 育成方針

**承諾率を高める施策**:

- コード品質スコアを向上させる研修
- レビュー経験を増やすメンタリング
- 協力的な行動を奨励（表彰制度など）

---

## 📁 出力ファイル

### 可視化グラフ

各訓練期間の特徴量重要度グラフ:

- `outputs/review_acceptance_cross_eval_nova/train_0-3m/feature_importance/gradient_importance_combined.png`
- `outputs/review_acceptance_cross_eval_nova/train_3-6m/feature_importance/gradient_importance_combined.png`
- `outputs/review_acceptance_cross_eval_nova/train_6-9m/feature_importance/gradient_importance_combined.png`
- `outputs/review_acceptance_cross_eval_nova/train_9-12m/feature_importance/gradient_importance_combined.png`

### 数値データ

- `outputs/review_acceptance_cross_eval_nova/train_*/feature_importance/gradient_importance.json`

---

## 🔗 関連ドキュメント

- `docs/最終モデル設定_LR00005_E20_S777.md` - 最終モデル設定
- `docs/IRL分析の解釈_報酬関数と行動パターン.md` - IRL の解釈方法
- `docs/IRL特徴量定義_9状態4行動.md` - 特徴量の定義

---

_最終更新日: 2025-10-29_
_Seed 777: 全モデル正常動作、平均 AUC-PR 0.798 🎉_
